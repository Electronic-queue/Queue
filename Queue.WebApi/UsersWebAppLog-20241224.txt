2024-12-24 00:00:25.929 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/RecordStatus?api-version=1 - application/json 172
2024-12-24 00:00:25.944 +05:00 [INF] CorrelationId: d5724906-0033-4802-beef-2cc537923f66
2024-12-24 00:00:25.945 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:00:25.945 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordStatusController.Create (Queue.WebApi)'
2024-12-24 00:00:25.949 +05:00 [INF] Route matched with {action = "Create", controller = "RecordStatus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordStatusContracts.CreateRecordStatusDto) on controller Queue.WebApi.Controllers.RecordStatusController (Queue.WebApi).
2024-12-24 00:00:25.963 +05:00 [INF] Users Request: CreateRecordStatusCommand "00000000-0000-0000-0000-000000000000" {"NameRu":"Askar","NameKk":"string","NameEn":"string","DescriptionRu":"string","DescriptionKk":"string","DescriptionEn":"string","CreatedBy":0,"$type":"CreateRecordStatusCommand"} 
2024-12-24 00:00:26.108 +05:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 100), @p7='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[RecordStatuses] ([CreatedBy], [CreatedOn], [Description_en], [Description_kk], [Description_ru], [Name_en], [Name_kk], [Name_ru])
OUTPUT INSERTED.[RecordStatusID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-12-24 00:00:26.111 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__RecordSt__332920C28F74EBD5'. Cannot insert duplicate key in object 'elec_queue.RecordStatuses'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4a060e78-986c-43e2-9220-183d0348267b
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__RecordSt__332920C28F74EBD5'. Cannot insert duplicate key in object 'elec_queue.RecordStatuses'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4a060e78-986c-43e2-9220-183d0348267b
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:00:26.152 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:00:26.153 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordStatusController.Create (Queue.WebApi) in 203.8197ms
2024-12-24 00:00:26.153 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordStatusController.Create (Queue.WebApi)'
2024-12-24 00:00:26.153 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/RecordStatus?api-version=1 - 200 null application/json; charset=utf-8 225.0314ms
2024-12-24 00:02:39.550 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 204
2024-12-24 00:02:39.552 +05:00 [INF] CorrelationId: 9f614ee9-221b-479e-9d2b-d49e71809ed0
2024-12-24 00:02:39.558 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:02:39.560 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:02:39.560 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:02:39.563 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"string","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:02:39.623 +05:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:02:39.626 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4a060e78-986c-43e2-9220-183d0348267b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4a060e78-986c-43e2-9220-183d0348267b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:02:39.658 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:02:39.658 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 97.6738ms
2024-12-24 00:02:39.658 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:02:39.658 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 108.224ms
2024-12-24 00:03:21.274 +05:00 [INF] Приложение запущено
2024-12-24 00:03:21.765 +05:00 [INF] Now listening on: https://localhost:7092
2024-12-24 00:03:21.767 +05:00 [INF] Now listening on: http://localhost:5294
2024-12-24 00:03:21.769 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-24 00:03:21.770 +05:00 [INF] Hosting environment: Development
2024-12-24 00:03:21.770 +05:00 [INF] Content root path: C:\Users\chich\source\repos\Queue\Queue.WebApi
2024-12-24 00:03:22.295 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.html - null null
2024-12-24 00:03:22.486 +05:00 [INF] CorrelationId: 023b71c7-41dc-4d64-ac02-8ada7ac3ff92
2024-12-24 00:03:22.635 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.html - 200 null text/html;charset=utf-8 364.7015ms
2024-12-24 00:03:22.644 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2024-12-24 00:03:22.644 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.js - null null
2024-12-24 00:03:22.645 +05:00 [INF] CorrelationId: c2645ebc-5914-4ff8-9ebc-e650c28e07e1
2024-12-24 00:03:22.649 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.js - 200 null application/javascript;charset=utf-8 5.5402ms
2024-12-24 00:03:22.653 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2024-12-24 00:03:22.663 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 19.4736ms
2024-12-24 00:03:22.721 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.1662ms
2024-12-24 00:03:22.791 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2024-12-24 00:03:22.793 +05:00 [INF] CorrelationId: 7bd8c698-9cf2-4e7f-a9a5-1241b0d8c611
2024-12-24 00:03:23.119 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 329.0582ms
2024-12-24 00:03:40.756 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 204
2024-12-24 00:03:40.757 +05:00 [INF] CorrelationId: 00b454f7-3e22-4947-b83e-8297d52de6f8
2024-12-24 00:03:40.760 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:03:40.799 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:03:40.823 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:03:52.933 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"string","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:04:24.598 +05:00 [INF] Executed DbCommand (125ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:04:24.674 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:05:00.268 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:05:00.283 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 79459.1353ms
2024-12-24 00:05:00.283 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:05:00.291 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 79537.5304ms
2024-12-24 00:05:02.287 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 201
2024-12-24 00:05:02.288 +05:00 [INF] CorrelationId: 794a50e9-dab5-49ad-b478-8cdab453d476
2024-12-24 00:05:02.288 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:05:02.289 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:05:02.290 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:05:05.671 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"123","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:05:12.298 +05:00 [INF] Executed DbCommand (142ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:05:12.301 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:05:52.800 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:05:52.803 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 50514.9803ms
2024-12-24 00:05:52.810 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:05:52.810 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 50524.3329ms
2024-12-24 00:05:56.063 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 210
2024-12-24 00:05:56.063 +05:00 [INF] CorrelationId: 0a1f8330-01a7-40f3-a98e-4c48a652b981
2024-12-24 00:05:56.064 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:05:56.064 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:05:56.064 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:06:00.099 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"123456789111","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:06:02.722 +05:00 [INF] Executed DbCommand (183ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiStringFixedLength), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:06:02.724 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__RecordS__3335971A". The conflict occurred in database "aybolat_db", table "elec_queue.RecordStatuses", column 'RecordStatusID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__RecordS__3335971A". The conflict occurred in database "aybolat_db", table "elec_queue.RecordStatuses", column 'RecordStatusID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:06:49.730 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:06:52.387 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 56323.951ms
2024-12-24 00:06:52.387 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:06:52.387 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 56326.471ms
2024-12-24 00:08:10.564 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 209
2024-12-24 00:08:10.564 +05:00 [INF] CorrelationId: de599476-cd5a-4149-9be3-c17f8de51ffa
2024-12-24 00:08:10.564 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:08:10.564 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:08:10.565 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:08:12.130 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"12345612312","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:08:15.326 +05:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:08:15.330 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2c4b3d23-f442-41d8-8379-615f8000b15a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:08:15.361 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:08:15.361 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 4796.4883ms
2024-12-24 00:08:15.361 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:08:15.361 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 4802.6366ms
2024-12-24 00:10:48.047 +05:00 [INF] Приложение запущено
2024-12-24 00:10:48.301 +05:00 [INF] Now listening on: https://localhost:7092
2024-12-24 00:10:48.303 +05:00 [INF] Now listening on: http://localhost:5294
2024-12-24 00:10:48.304 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-24 00:10:48.305 +05:00 [INF] Hosting environment: Development
2024-12-24 00:10:48.305 +05:00 [INF] Content root path: C:\Users\chich\source\repos\Queue\Queue.WebApi
2024-12-24 00:10:48.869 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.html - null null
2024-12-24 00:10:49.054 +05:00 [INF] CorrelationId: 066c4a18-0088-434f-bd49-1faf0de9ab1d
2024-12-24 00:10:49.224 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.html - 200 null text/html;charset=utf-8 375.7383ms
2024-12-24 00:10:49.231 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2024-12-24 00:10:49.231 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.js - null null
2024-12-24 00:10:49.233 +05:00 [INF] CorrelationId: 00fee455-d8bc-4b76-b4d0-2907282a69d5
2024-12-24 00:10:49.236 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.js - 200 null application/javascript;charset=utf-8 4.7553ms
2024-12-24 00:10:49.239 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2024-12-24 00:10:49.244 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 13.3096ms
2024-12-24 00:10:49.288 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.3714ms
2024-12-24 00:10:49.355 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2024-12-24 00:10:49.357 +05:00 [INF] CorrelationId: 64d434ed-98d5-48c0-bb50-d71027715c38
2024-12-24 00:10:49.765 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 409.9895ms
2024-12-24 00:11:03.424 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 204
2024-12-24 00:11:03.425 +05:00 [INF] CorrelationId: f6c3ead2-741c-45ea-9228-454847ee6537
2024-12-24 00:11:03.430 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:11:03.480 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:11:03.505 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:11:08.984 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"string","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:11:14.419 +05:00 [INF] Executed DbCommand (232ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:11:14.488 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e7d4384d-fe86-4afd-950f-29c5f3fdf7bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e7d4384d-fe86-4afd-950f-29c5f3fdf7bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:11:45.862 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:11:45.882 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 42372.15ms
2024-12-24 00:11:45.886 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:11:45.894 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 42471.1135ms
2024-12-24 00:11:54.228 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 204
2024-12-24 00:11:54.228 +05:00 [INF] CorrelationId: 1927b375-bf42-41ff-a92b-c1c06db0dfd4
2024-12-24 00:11:54.234 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:11:54.237 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:11:54.237 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:11:56.525 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"123456","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:12:00.591 +05:00 [INF] Executed DbCommand (85ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:12:00.593 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e7d4384d-fe86-4afd-950f-29c5f3fdf7bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e7d4384d-fe86-4afd-950f-29c5f3fdf7bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:13:26.937 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:13:26.945 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 92708.8195ms
2024-12-24 00:13:26.946 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:13:26.946 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 92720.7741ms
2024-12-24 00:13:48.004 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 207
2024-12-24 00:13:48.005 +05:00 [INF] CorrelationId: 8b9a2cec-e400-4353-8718-b6f35420e054
2024-12-24 00:13:48.005 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:13:48.005 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:13:48.005 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:13:52.052 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"123456","RecordStatusId":1,"ServiceId":1,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":1,"TicketNumber":100,"$type":"CreateRecordCommand"} 
2024-12-24 00:13:54.442 +05:00 [INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiString), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:13:54.446 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e7d4384d-fe86-4afd-950f-29c5f3fdf7bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "check_iin_is_numeric_string". The conflict occurred in database "aybolat_db", table "elec_queue.Records", column 'IIN'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e7d4384d-fe86-4afd-950f-29c5f3fdf7bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:14:45.241 +05:00 [INF] Приложение запущено
2024-12-24 00:14:45.643 +05:00 [INF] Now listening on: https://localhost:7092
2024-12-24 00:14:45.646 +05:00 [INF] Now listening on: http://localhost:5294
2024-12-24 00:14:45.650 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-24 00:14:45.651 +05:00 [INF] Hosting environment: Development
2024-12-24 00:14:45.651 +05:00 [INF] Content root path: C:\Users\chich\source\repos\Queue\Queue.WebApi
2024-12-24 00:14:48.795 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.html - null null
2024-12-24 00:14:49.059 +05:00 [INF] CorrelationId: 662019b0-79c7-4878-8ca1-eabf5f8dacd7
2024-12-24 00:14:49.227 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.html - 200 null text/html;charset=utf-8 451.0109ms
2024-12-24 00:14:49.241 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2024-12-24 00:14:49.241 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.js - null null
2024-12-24 00:14:49.243 +05:00 [INF] CorrelationId: 8d9bf230-c126-432f-9647-fd492202256d
2024-12-24 00:14:49.250 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.js - 200 null application/javascript;charset=utf-8 8.4952ms
2024-12-24 00:14:49.261 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2024-12-24 00:14:49.271 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 30.5879ms
2024-12-24 00:14:49.314 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.2379ms
2024-12-24 00:14:49.406 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2024-12-24 00:14:49.409 +05:00 [INF] CorrelationId: d82b3c53-903e-463f-b606-5fbacbb8fa4a
2024-12-24 00:14:49.754 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 349.3277ms
2024-12-24 00:15:10.017 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 210
2024-12-24 00:15:10.018 +05:00 [INF] CorrelationId: 48f97f19-2b2f-4be2-99a5-e93e7f1b6865
2024-12-24 00:15:10.021 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:15:10.060 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:15:10.088 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:15:13.045 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"123456789123","RecordStatusId":0,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:15:16.524 +05:00 [INF] Executed DbCommand (110ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiStringFixedLength), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:15:16.573 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__RecordS__3335971A". The conflict occurred in database "aybolat_db", table "elec_queue.RecordStatuses", column 'RecordStatusID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:84030948-c52f-4378-9378-c746c70d595a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__RecordS__3335971A". The conflict occurred in database "aybolat_db", table "elec_queue.RecordStatuses", column 'RecordStatusID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:84030948-c52f-4378-9378-c746c70d595a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:15:49.623 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:15:49.636 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 39546.0844ms
2024-12-24 00:15:49.637 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:15:49.644 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 39627.5331ms
2024-12-24 00:15:56.087 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 210
2024-12-24 00:15:56.087 +05:00 [INF] CorrelationId: 90328812-0145-4396-913c-44a40e902359
2024-12-24 00:15:56.089 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:15:56.091 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:15:56.091 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:16:00.211 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"123456789123","RecordStatusId":1,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:16:04.014 +05:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiStringFixedLength), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:16:04.018 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__Service__3429BB53". The conflict occurred in database "aybolat_db", table "elec_queue.Services", column 'ServiceID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:84030948-c52f-4378-9378-c746c70d595a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__Service__3429BB53". The conflict occurred in database "aybolat_db", table "elec_queue.Services", column 'ServiceID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:84030948-c52f-4378-9378-c746c70d595a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:16:04.052 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:16:04.052 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 7961.0534ms
2024-12-24 00:16:04.052 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:16:04.053 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 7966.6972ms
2024-12-24 00:16:24.383 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - application/json 210
2024-12-24 00:16:24.384 +05:00 [INF] CorrelationId: abd2d106-379b-49a5-8f31-9a40e035b028
2024-12-24 00:16:24.384 +05:00 [INF] CORS policy execution successful.
2024-12-24 00:16:24.385 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:16:24.385 +05:00 [INF] Route matched with {action = "Create", controller = "Record"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.RecordContracts.CreateRecordDto) on controller Queue.WebApi.Controllers.RecordController (Queue.WebApi).
2024-12-24 00:16:27.757 +05:00 [INF] Users Request: CreateRecordCommand "00000000-0000-0000-0000-000000000000" {"FirstName":"string","LastName":"string","Surname":"string","Iin":"123456789123","RecordStatusId":1,"ServiceId":0,"StartTime":null,"EndTime":null,"IsCreatedByEmployee":true,"CreatedBy":0,"TicketNumber":0,"$type":"CreateRecordCommand"} 
2024-12-24 00:16:36.893 +05:00 [INF] Executed DbCommand (124ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (Size = 12) (DbType = AnsiStringFixedLength), @p5='?' (DbType = Boolean), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Records] ([CreatedBy], [CreatedOn], [EndTime], [FirstName], [IIN], [IsCreatedByEmployee], [LastName], [RecordStatusID], [ServiceID], [StartTime], [Surname], [TicketNumber])
OUTPUT INSERTED.[RecordID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-12-24 00:16:36.896 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__Service__3429BB53". The conflict occurred in database "aybolat_db", table "elec_queue.Services", column 'ServiceID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:84030948-c52f-4378-9378-c746c70d595a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Records__Service__3429BB53". The conflict occurred in database "aybolat_db", table "elec_queue.Services", column 'ServiceID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:84030948-c52f-4378-9378-c746c70d595a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 00:19:53.031 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 00:19:53.042 +05:00 [INF] Executed action Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi) in 208660.5398ms
2024-12-24 00:19:53.046 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.RecordController.Create (Queue.WebApi)'
2024-12-24 00:19:53.048 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Record?api-version=1 - 200 null application/json; charset=utf-8 208669.1051ms
2024-12-24 01:33:13.817 +05:00 [INF] Приложение запущено
2024-12-24 01:33:14.584 +05:00 [INF] Now listening on: https://localhost:7092
2024-12-24 01:33:14.589 +05:00 [INF] Now listening on: http://localhost:5294
2024-12-24 01:33:14.594 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-24 01:33:14.595 +05:00 [INF] Hosting environment: Development
2024-12-24 01:33:14.596 +05:00 [INF] Content root path: C:\Users\chich\source\repos\Queue\Queue.WebApi
2024-12-24 01:33:17.335 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.html - null null
2024-12-24 01:33:17.586 +05:00 [INF] CorrelationId: a55edd43-8142-45a6-b378-cf037a00f0ea
2024-12-24 01:33:17.898 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.html - 200 null text/html;charset=utf-8 582.6094ms
2024-12-24 01:33:17.911 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.js - null null
2024-12-24 01:33:17.911 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2024-12-24 01:33:17.913 +05:00 [INF] CorrelationId: d7ad903f-2b93-4ead-9cc6-1784ef434be6
2024-12-24 01:33:17.917 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.js - 200 null application/javascript;charset=utf-8 5.4044ms
2024-12-24 01:33:17.923 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2024-12-24 01:33:17.931 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 19.882ms
2024-12-24 01:33:18.041 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 118.4573ms
2024-12-24 01:33:18.113 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2024-12-24 01:33:18.118 +05:00 [INF] CorrelationId: ac726250-0a6f-4c4c-968e-796b6ddd454f
2024-12-24 01:33:18.661 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 548.3825ms
2024-12-24 01:34:17.970 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/1/NotificationType?api-version=1 - null null
2024-12-24 01:34:17.973 +05:00 [INF] CorrelationId: aec5705d-8cdd-48b4-977a-b3068821c04c
2024-12-24 01:34:18.080 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationTypeController.GetAll (Queue.WebApi)'
2024-12-24 01:34:18.146 +05:00 [INF] Route matched with {action = "GetAll", controller = "NotificationType"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Queue.Application.NotificationTypes.Queries.GetNotificationTypeList.NotificationTypeListVm]] GetAll() on controller Queue.WebApi.Controllers.NotificationTypeController (Queue.WebApi).
2024-12-24 01:34:18.228 +05:00 [INF] Users Request: GetNotificationTypeListQuery "00000000-0000-0000-0000-000000000000" {"$type":"GetNotificationTypeListQuery"} 
2024-12-24 01:34:23.248 +05:00 [INF] Executed DbCommand (186ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NotificationTypeID], [n].[CreatedBy], [n].[CreatedOn], [n].[Description_en], [n].[Description_kk], [n].[Description_ru], [n].[Name_en], [n].[Name_kk], [n].[Name_ru]
FROM [elec_queue].[NotificationTypes] AS [n]
2024-12-24 01:34:23.492 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result`1[[System.Collections.Generic.List`1[[Queue.Domain.Entites.NotificationType, Queue.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-24 01:34:23.697 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationTypeController.GetAll (Queue.WebApi) in 5544.2071ms
2024-12-24 01:34:23.698 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationTypeController.GetAll (Queue.WebApi)'
2024-12-24 01:34:23.711 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/1/NotificationType?api-version=1 - 200 null application/json; charset=utf-8 5742.0444ms
2024-12-24 01:34:57.506 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - application/json 187
2024-12-24 01:34:57.508 +05:00 [INF] CorrelationId: e65f0ffa-c7c5-431c-92e5-d18cedb3db89
2024-12-24 01:34:57.518 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:34:57.524 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:34:57.545 +05:00 [INF] Route matched with {action = "Create", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.NotificationContracts.CreateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:35:08.256 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi) in 10711.0481ms
2024-12-24 01:35:08.257 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:35:08.297 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - 400 null application/json 10792.0269ms
2024-12-24 01:35:14.087 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - application/json 187
2024-12-24 01:35:14.088 +05:00 [INF] CorrelationId: 54fc8591-3c66-469a-9369-ee47e56104c1
2024-12-24 01:35:14.089 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:35:14.089 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:35:14.089 +05:00 [INF] Route matched with {action = "Create", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.NotificationContracts.CreateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:35:14.098 +05:00 [INF] Users Request: CreateNotificationCommand "00000000-0000-0000-0000-000000000000" {"NameRu":"Askar","NameKk":"string","NameEn":"string","ContentRu":"string","ContentKk":"string","ContentEn":"string","NotificationTypeId":1,"CreatedBy":3,"$type":"CreateNotificationCommand"} 
2024-12-24 01:35:14.644 +05:00 [INF] Executed DbCommand (170ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 100), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Notifications] ([Content_en], [Content_kk], [Content_ru], [CreatedBy], [CreatedOn], [Name_en], [Name_kk], [Name_ru], [NotificationTypeID])
OUTPUT INSERTED.[NotificationID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-12-24 01:35:14.798 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ba802068-fec5-49de-a272-2369e27f1d45
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ba802068-fec5-49de-a272-2369e27f1d45
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 01:35:15.007 +05:00 [ERR] Ошибка при создании уведомления.
2024-12-24 01:35:15.012 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 01:35:15.015 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi) in 926.0109ms
2024-12-24 01:35:15.016 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:35:15.017 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - 400 null application/json; charset=utf-8 929.4971ms
2024-12-24 01:35:33.544 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - application/json 188
2024-12-24 01:35:33.544 +05:00 [INF] CorrelationId: 4b0d3fa0-6a3e-4f75-a0ab-e407573e3da4
2024-12-24 01:35:33.545 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:35:33.545 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:35:33.545 +05:00 [INF] Route matched with {action = "Create", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.NotificationContracts.CreateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:35:33.551 +05:00 [INF] Users Request: CreateNotificationCommand "00000000-0000-0000-0000-000000000000" {"NameRu":"Askar","NameKk":"string","NameEn":"string","ContentRu":"string","ContentKk":"string","ContentEn":"string","NotificationTypeId":14,"CreatedBy":3,"$type":"CreateNotificationCommand"} 
2024-12-24 01:35:33.755 +05:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 100), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Notifications] ([Content_en], [Content_kk], [Content_ru], [CreatedBy], [CreatedOn], [Name_en], [Name_kk], [Name_ru], [NotificationTypeID])
OUTPUT INSERTED.[NotificationID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-12-24 01:35:33.762 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ba802068-fec5-49de-a272-2369e27f1d45
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ba802068-fec5-49de-a272-2369e27f1d45
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 01:35:33.848 +05:00 [ERR] Ошибка при создании уведомления.
2024-12-24 01:35:33.849 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 01:35:33.849 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi) in 303.7076ms
2024-12-24 01:35:33.849 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:35:33.850 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - 400 null application/json; charset=utf-8 306.6232ms
2024-12-24 01:36:30.357 +05:00 [INF] Приложение запущено
2024-12-24 01:36:30.980 +05:00 [INF] Now listening on: https://localhost:7092
2024-12-24 01:36:30.984 +05:00 [INF] Now listening on: http://localhost:5294
2024-12-24 01:36:30.987 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-24 01:36:30.988 +05:00 [INF] Hosting environment: Development
2024-12-24 01:36:30.988 +05:00 [INF] Content root path: C:\Users\chich\source\repos\Queue\Queue.WebApi
2024-12-24 01:36:34.442 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.html - null null
2024-12-24 01:36:34.729 +05:00 [INF] CorrelationId: 0aff67a9-174c-409d-a26e-d01df63b8595
2024-12-24 01:36:35.059 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.html - 200 null text/html;charset=utf-8 640.5674ms
2024-12-24 01:36:35.082 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - null null
2024-12-24 01:36:35.082 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/_vs/browserLink - null null
2024-12-24 01:36:35.082 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/index.js - null null
2024-12-24 01:36:35.085 +05:00 [INF] CorrelationId: 91c4acf1-3b26-4bbb-915b-fd6cef92439e
2024-12-24 01:36:35.096 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/index.js - 200 null application/javascript;charset=utf-8 14.1352ms
2024-12-24 01:36:35.156 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 73.6526ms
2024-12-24 01:36:35.218 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/_vs/browserLink - 200 null text/javascript; charset=UTF-8 136.6158ms
2024-12-24 01:36:35.305 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - null null
2024-12-24 01:36:35.308 +05:00 [INF] CorrelationId: c2d8f3d0-d472-4dd1-bf1e-c3b15d224744
2024-12-24 01:36:35.859 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 554.6635ms
2024-12-24 01:37:03.515 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - application/json 187
2024-12-24 01:37:03.516 +05:00 [INF] CorrelationId: 775e6f10-84f6-46d4-94d5-5d27f0988487
2024-12-24 01:37:03.525 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:37:03.621 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:37:03.693 +05:00 [INF] Route matched with {action = "Create", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.NotificationContracts.CreateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:37:09.235 +05:00 [INF] Users Request: CreateNotificationCommand "00000000-0000-0000-0000-000000000000" {"NameRu":"Askar","NameKk":"string","NameEn":"string","ContentRu":"string","ContentKk":"string","ContentEn":"string","NotificationTypeId":1,"CreatedBy":4,"$type":"CreateNotificationCommand"} 
2024-12-24 01:37:34.043 +05:00 [INF] Executed DbCommand (197ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 100), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Notifications] ([Content_en], [Content_kk], [Content_ru], [CreatedBy], [CreatedOn], [Name_en], [Name_kk], [Name_ru], [NotificationTypeID])
OUTPUT INSERTED.[NotificationID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-12-24 01:37:34.197 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:42b0dfcf-4ca8-45d5-ac10-90fc500bcfe8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:42b0dfcf-4ca8-45d5-ac10-90fc500bcfe8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 01:38:09.418 +05:00 [ERR] Ошибка при создании уведомления.
2024-12-24 01:38:09.455 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 01:38:09.498 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi) in 65796.3669ms
2024-12-24 01:38:09.499 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:38:09.513 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - 400 null application/json; charset=utf-8 65999.3061ms
2024-12-24 01:38:19.846 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/1/Notification?api-version=1 - null null
2024-12-24 01:38:19.847 +05:00 [INF] CorrelationId: 0f66208c-03e6-4706-bae2-6ee6a9640d8c
2024-12-24 01:38:19.851 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi)'
2024-12-24 01:38:19.881 +05:00 [INF] Route matched with {action = "GetAll", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Queue.Application.Notifications.Queries.GetNotificationList.NotificationListVm]] GetAll() on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:38:19.888 +05:00 [INF] Users Request: GetNotificationListQuery "00000000-0000-0000-0000-000000000000" {"$type":"GetNotificationListQuery"} 
2024-12-24 01:38:20.598 +05:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NotificationID], [n].[Content_en], [n].[Content_kk], [n].[Content_ru], [n].[CreatedBy], [n].[CreatedOn], [n].[Name_en], [n].[Name_kk], [n].[Name_ru], [n].[NotificationTypeID]
FROM [elec_queue].[Notifications] AS [n]
2024-12-24 01:38:20.642 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result`1[[System.Collections.Generic.List`1[[Queue.Domain.Entites.Notification, Queue.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-24 01:38:20.736 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi) in 854.8346ms
2024-12-24 01:38:20.736 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi)'
2024-12-24 01:38:20.737 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/1/Notification?api-version=1 - 200 null application/json; charset=utf-8 892.1619ms
2024-12-24 01:38:45.163 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - application/json 188
2024-12-24 01:38:45.166 +05:00 [INF] CorrelationId: e36f5e9f-bbc8-4271-8071-9bdc25edfd0a
2024-12-24 01:38:45.169 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:38:45.170 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:38:45.171 +05:00 [INF] Route matched with {action = "Create", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.NotificationContracts.CreateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:38:49.255 +05:00 [INF] Users Request: CreateNotificationCommand "00000000-0000-0000-0000-000000000000" {"NameRu":"Askar","NameKk":"string","NameEn":"string","ContentRu":"string","ContentKk":"string","ContentEn":"string","NotificationTypeId":14,"CreatedBy":4,"$type":"CreateNotificationCommand"} 
2024-12-24 01:38:53.040 +05:00 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 100), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Notifications] ([Content_en], [Content_kk], [Content_ru], [CreatedBy], [CreatedOn], [Name_en], [Name_kk], [Name_ru], [NotificationTypeID])
OUTPUT INSERTED.[NotificationID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-12-24 01:38:53.048 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:42b0dfcf-4ca8-45d5-ac10-90fc500bcfe8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (string).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:42b0dfcf-4ca8-45d5-ac10-90fc500bcfe8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 01:39:37.216 +05:00 [ERR] Ошибка при создании уведомления.
2024-12-24 01:39:37.230 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 01:39:37.231 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi) in 52059.706ms
2024-12-24 01:39:37.231 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:39:37.238 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - 400 null application/json; charset=utf-8 52076.2225ms
2024-12-24 01:39:45.077 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - application/json 183
2024-12-24 01:39:45.078 +05:00 [INF] CorrelationId: b41c34ad-84c7-44d5-88cf-297871eb9524
2024-12-24 01:39:45.080 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:39:45.080 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:39:45.080 +05:00 [INF] Route matched with {action = "Create", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.NotificationContracts.CreateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:40:06.283 +05:00 [INF] Users Request: CreateNotificationCommand "00000000-0000-0000-0000-000000000000" {"NameRu":"Askar","NameKk":"Askar","NameEn":"Askar","ContentRu":"Askar","ContentKk":"Askar","ContentEn":"Askar","NotificationTypeId":14,"CreatedBy":4,"$type":"CreateNotificationCommand"} 
2024-12-24 01:40:10.140 +05:00 [INF] Executed DbCommand (93ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 100), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Notifications] ([Content_en], [Content_kk], [Content_ru], [CreatedBy], [CreatedOn], [Name_en], [Name_kk], [Name_ru], [NotificationTypeID])
OUTPUT INSERTED.[NotificationID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-12-24 01:40:14.467 +05:00 [INF] Успешное создание уведомления.
2024-12-24 01:40:19.748 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 01:40:19.749 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi) in 34668.7424ms
2024-12-24 01:40:19.749 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:40:19.749 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - 200 null application/json; charset=utf-8 34671.8866ms
2024-12-24 01:40:26.660 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/1/Notification?api-version=1 - null null
2024-12-24 01:40:26.661 +05:00 [INF] CorrelationId: e30a45b8-8252-4236-8339-f2887eb2dc12
2024-12-24 01:40:26.664 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi)'
2024-12-24 01:40:26.664 +05:00 [INF] Route matched with {action = "GetAll", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Queue.Application.Notifications.Queries.GetNotificationList.NotificationListVm]] GetAll() on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:40:26.675 +05:00 [INF] Users Request: GetNotificationListQuery "00000000-0000-0000-0000-000000000000" {"$type":"GetNotificationListQuery"} 
2024-12-24 01:40:26.754 +05:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NotificationID], [n].[Content_en], [n].[Content_kk], [n].[Content_ru], [n].[CreatedBy], [n].[CreatedOn], [n].[Name_en], [n].[Name_kk], [n].[Name_ru], [n].[NotificationTypeID]
FROM [elec_queue].[Notifications] AS [n]
2024-12-24 01:40:26.758 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result`1[[System.Collections.Generic.List`1[[Queue.Domain.Entites.Notification, Queue.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-24 01:40:26.759 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi) in 94.8773ms
2024-12-24 01:40:26.759 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi)'
2024-12-24 01:40:26.760 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/1/Notification?api-version=1 - 200 null application/json; charset=utf-8 100.3675ms
2024-12-24 01:41:11.115 +05:00 [INF] Request starting HTTP/2 PUT https://localhost:7092/api/1/Notification?api-version=1 - application/json 183
2024-12-24 01:41:11.117 +05:00 [INF] CorrelationId: 1b1e88b7-6df5-4921-a55f-9e3d007963d9
2024-12-24 01:41:11.117 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:41:11.120 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Update (Queue.WebApi)'
2024-12-24 01:41:11.128 +05:00 [INF] Route matched with {action = "Update", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Queue.WebApi.Contracts.NotificationContracts.UpdateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:41:11.162 +05:00 [INF] Users Request: UpdateNotificationCommand "00000000-0000-0000-0000-000000000000" {"NotificationId":1,"NameRu":"M","NameKk":"M","NameEn":"string","ContentRu":"string","ContentKk":"string","ContentEn":"string","NotificationTypeId":1,"$type":"UpdateNotificationCommand"} 
2024-12-24 01:41:11.474 +05:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[NotificationID], [n].[Content_en], [n].[Content_kk], [n].[Content_ru], [n].[CreatedBy], [n].[CreatedOn], [n].[Name_en], [n].[Name_kk], [n].[Name_ru], [n].[NotificationTypeID]
FROM [elec_queue].[Notifications] AS [n]
WHERE [n].[NotificationID] = @__p_0
2024-12-24 01:41:11.575 +05:00 [INF] Executed DbCommand (67ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 100), @p4='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [elec_queue].[Notifications] SET [Content_en] = @p0, [Content_kk] = @p1, [Content_ru] = @p2, [Name_kk] = @p3, [Name_ru] = @p4
OUTPUT 1
WHERE [NotificationID] = @p5;
2024-12-24 01:41:11.581 +05:00 [INF] Успешное обновление уведомления с id: 1.
2024-12-24 01:41:11.584 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 01:41:11.585 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Update (Queue.WebApi) in 456.3218ms
2024-12-24 01:41:11.585 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Update (Queue.WebApi)'
2024-12-24 01:41:11.585 +05:00 [INF] Request finished HTTP/2 PUT https://localhost:7092/api/1/Notification?api-version=1 - 200 null application/json; charset=utf-8 474.3997ms
2024-12-24 01:41:17.618 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - application/json 183
2024-12-24 01:41:17.619 +05:00 [INF] CorrelationId: 2754812d-9488-42e9-b8d7-0b31121c8a60
2024-12-24 01:41:17.619 +05:00 [INF] CORS policy execution successful.
2024-12-24 01:41:17.620 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:41:17.620 +05:00 [INF] Route matched with {action = "Create", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(Queue.WebApi.Contracts.NotificationContracts.CreateNotificationDto) on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:41:23.623 +05:00 [INF] Users Request: CreateNotificationCommand "00000000-0000-0000-0000-000000000000" {"NameRu":"Askar","NameKk":"Askar","NameEn":"Askar","ContentRu":"Askar","ContentKk":"Askar","ContentEn":"Askar","NotificationTypeId":14,"CreatedBy":4,"$type":"CreateNotificationCommand"} 
2024-12-24 01:41:28.188 +05:00 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 100), @p6='?' (Size = 100), @p7='?' (Size = 100), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [elec_queue].[Notifications] ([Content_en], [Content_kk], [Content_ru], [CreatedBy], [CreatedOn], [Name_en], [Name_kk], [Name_ru], [NotificationTypeID])
OUTPUT INSERTED.[NotificationID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-12-24 01:41:28.196 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'Queue.Persistence.QueuesDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (Askar).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:42b0dfcf-4ca8-45d5-ac10-90fc500bcfe8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ__Notifica__332920C2AFCB7758'. Cannot insert duplicate key in object 'elec_queue.Notifications'. The duplicate key value is (Askar).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:42b0dfcf-4ca8-45d5-ac10-90fc500bcfe8
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-12-24 01:41:28.264 +05:00 [ERR] Ошибка при создании уведомления.
2024-12-24 01:41:28.265 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result'.
2024-12-24 01:41:28.265 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi) in 10644.9454ms
2024-12-24 01:41:28.265 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.Create (Queue.WebApi)'
2024-12-24 01:41:28.265 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/1/Notification?api-version=1 - 400 null application/json; charset=utf-8 10648.0467ms
2024-12-24 01:41:38.519 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/1/Notification?api-version=1 - null null
2024-12-24 01:41:38.519 +05:00 [INF] CorrelationId: a32c0670-1087-4d61-8272-c33f5b56c0de
2024-12-24 01:41:38.520 +05:00 [INF] Executing endpoint 'Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi)'
2024-12-24 01:41:38.520 +05:00 [INF] Route matched with {action = "GetAll", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Queue.Application.Notifications.Queries.GetNotificationList.NotificationListVm]] GetAll() on controller Queue.WebApi.Controllers.NotificationController (Queue.WebApi).
2024-12-24 01:41:38.524 +05:00 [INF] Users Request: GetNotificationListQuery "00000000-0000-0000-0000-000000000000" {"$type":"GetNotificationListQuery"} 
2024-12-24 01:41:38.588 +05:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NotificationID], [n].[Content_en], [n].[Content_kk], [n].[Content_ru], [n].[CreatedBy], [n].[CreatedOn], [n].[Name_en], [n].[Name_kk], [n].[Name_ru], [n].[NotificationTypeID]
FROM [elec_queue].[Notifications] AS [n]
2024-12-24 01:41:38.589 +05:00 [INF] Executing OkObjectResult, writing value of type 'KDS.Primitives.FluentResult.Result`1[[System.Collections.Generic.List`1[[Queue.Domain.Entites.Notification, Queue.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-24 01:41:38.589 +05:00 [INF] Executed action Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi) in 69.3246ms
2024-12-24 01:41:38.589 +05:00 [INF] Executed endpoint 'Queue.WebApi.Controllers.NotificationController.GetAll (Queue.WebApi)'
2024-12-24 01:41:38.589 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/1/Notification?api-version=1 - 200 null application/json; charset=utf-8 70.9253ms
